package config

import (
	"fmt"
	"log"
	"time"

	"github.com/google/uuid"
	"github.com/luispfcanales/api-muac/internal/core/domain"
	"gorm.io/gorm"
)

func seedMedicalCenters(tx *gorm.DB) error {
	log.Println("üè• Creando centros de salud...")

	medicalCenters := []domain.Locality{
		{
			Name:               "TRES ISLAS",
			Latitude:           "-12.54838155",
			Longitude:          "-69.37050379",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "963455416",
			IsMedicalCenter:    true,
		},
		{
			Name:               "BAJO TAMBOPATA",
			Latitude:           "-12.62974621",
			Longitude:          "-69.18551406",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "973686074",
			IsMedicalCenter:    true,
		},
		{
			Name:               "AMARACAYRE",
			Latitude:           "-12.71982606",
			Longitude:          "-69.73693271",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "943285869",
			IsMedicalCenter:    true,
		},
		{
			Name:               "CABECERA MALINOSKI",
			Latitude:           "-13.1060161",
			Longitude:          "-70.25136718",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "082-795963",
			IsMedicalCenter:    true,
		},
		{
			Name:               "UNION PROGRESO",
			Latitude:           "-12.88048809",
			Longitude:          "-69.82848927",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "930283796",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SABALUYOC",
			Latitude:           "-12.32024542",
			Longitude:          "-69.27250039",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "982714482",
			IsMedicalCenter:    true,
		},
		{
			Name:               "ALEGRIA",
			Latitude:           "-12.12124206",
			Longitude:          "-69.12306",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "935974029",
			IsMedicalCenter:    true,
		},
		{
			Name:               "TAYACOME",
			Latitude:           "-11.73052052",
			Longitude:          "-71.64455738",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "990874501",
			IsMedicalCenter:    true,
		},
		{
			Name:               "BELGICA",
			Latitude:           "-10.9731475",
			Longitude:          "-69.73117422",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "965768990",
			IsMedicalCenter:    true,
		},
		{
			Name:               "VILLA ROCIO",
			Latitude:           "-11.78509192",
			Longitude:          "-69.18577717",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "967902551",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SANTA MARIA",
			Latitude:           "-11.89472628",
			Longitude:          "-69.00601556",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "931494291",
			IsMedicalCenter:    true,
		},
		{
			Name:               "CENTRO DE SALUD MENTAL COMUNITARIO PUERTO MALDONADO",
			Latitude:           "-12.59125168",
			Longitude:          "-69.20016332",
			Description:        "Centro de salud mental comunitario",
			PhoneMedicalCenter: "982535232",
			IsMedicalCenter:    true,
		},
		{
			Name:               "HOSPITAL SANTA ROSA",
			Latitude:           "-12.60136167",
			Longitude:          "-69.18308833",
			Description:        "Hospital",
			PhoneMedicalCenter: "974944702",
			IsMedicalCenter:    true,
		},
		{
			Name:               "LA JOYA",
			Latitude:           "-12.63197",
			Longitude:          "-71.22762",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "982680151",
			IsMedicalCenter:    true,
		},
		{
			Name:               "JORGE CHAVEZ",
			Latitude:           "-12.66857369",
			Longitude:          "-69.11937067",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "997624718",
			IsMedicalCenter:    true,
		},
		{
			Name:               "NUEVO MILENIO",
			Latitude:           "-12.59387855",
			Longitude:          "-69.19926055",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "982703519",
			IsMedicalCenter:    true,
		},
		{
			Name:               "PUENTE INAMBARI",
			Latitude:           "-13.18663649",
			Longitude:          "-70.38579055",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "991355542",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SALUD MENTAL COMUNITARIO MAZUKO",
			Latitude:           "-13.10127869",
			Longitude:          "-70.368355",
			Description:        "Centro de salud mental comunitario",
			PhoneMedicalCenter: "982768878",
			IsMedicalCenter:    true,
		},
		{
			Name:               "DIAMANTE",
			Latitude:           "-12.33497307",
			Longitude:          "-70.95682565",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "949518834",
			IsMedicalCenter:    true,
		},
		{
			Name:               "BOCA AMIGO",
			Latitude:           "-12.59153925",
			Longitude:          "-69.19167769",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "986866389",
			IsMedicalCenter:    true,
		},
		{
			Name:               "BAJO PUQUIRI",
			Latitude:           "-12.9076075",
			Longitude:          "-70.3625",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "925005391",
			IsMedicalCenter:    true,
		},
		{
			Name:               "GUACAMAYO PACAL",
			Latitude:           "-12.63126957",
			Longitude:          "-70.23202376",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "956761514",
			IsMedicalCenter:    true,
		},
		{
			Name:               "VILLA NUEVA VICTORIA",
			Latitude:           "-12.59587203",
			Longitude:          "-69.22686282",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "935 032 664",
			IsMedicalCenter:    true,
		},
		{
			Name:               "UNION",
			Latitude:           "-12.6007213",
			Longitude:          "-69.17877832",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "953829836",
			IsMedicalCenter:    true,
		},
		{
			Name:               "MAZUKO",
			Latitude:           "-13.10092986",
			Longitude:          "-70.3671944",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "947787278",
			IsMedicalCenter:    true,
		},
		{
			Name:               "JAYAVE",
			Latitude:           "-12.77181276",
			Longitude:          "-69.94925981",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "950331876",
			IsMedicalCenter:    true,
		},
		{
			Name:               "MONTE SALVADO",
			Latitude:           "-12.22541589",
			Longitude:          "-69.35700897",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "923317669",
			IsMedicalCenter:    true,
		},
		{
			Name:               "LAGO VALENCIA",
			Latitude:           "-12.40614908",
			Longitude:          "-68.80304323",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "994724931",
			IsMedicalCenter:    true,
		},
		{
			Name:               "PLANCHON",
			Latitude:           "-12.27947563",
			Longitude:          "-69.15350044",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "984195074",
			IsMedicalCenter:    true,
		},
		{
			Name:               "FORTUNA",
			Latitude:           "-12.69966469",
			Longitude:          "-69.63664434",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "972673928",
			IsMedicalCenter:    true,
		},
		{
			Name:               "LAGARTO",
			Latitude:           "-12.65379833",
			Longitude:          "-69.8319",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "974747325",
			IsMedicalCenter:    true,
		},
		{
			Name:               "PALOTOA",
			Latitude:           "-12.66327",
			Longitude:          "-71.35620667",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "936358974",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SHIPETIARI",
			Latitude:           "-12.25254576",
			Longitude:          "-70.90872345",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "935018812",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SAN JOSE DE KARENE",
			Latitude:           "-12.69997",
			Longitude:          "-70.54424",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "959190839",
			IsMedicalCenter:    true,
		},
		{
			Name:               "NUEVO SAN JUAN",
			Latitude:           "-12.64041732",
			Longitude:          "-70.22333026",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "930288564",
			IsMedicalCenter:    true,
		},
		{
			Name:               "CHOQUE",
			Latitude:           "-12.98374931",
			Longitude:          "-70.59114915",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "956320262",
			IsMedicalCenter:    true,
		},
		{
			Name:               "QUEBRADA NUEVA",
			Latitude:           "-13.0245037",
			Longitude:          "-70.50348664",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "950348831",
			IsMedicalCenter:    true,
		},
		{
			Name:               "I√ëAPARI",
			Latitude:           "-10.94593375",
			Longitude:          "-69.57684276",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "954600528",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SAN MARTIN DE PORRES DE IBERIA",
			Latitude:           "-11.41230106",
			Longitude:          "-69.48750262",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "992779742",
			IsMedicalCenter:    true,
		},
		{
			Name:               "CHONTA",
			Latitude:           "-12.6686666",
			Longitude:          "-69.22802591",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "983989805",
			IsMedicalCenter:    true,
		},
		{
			Name:               "LOERO",
			Latitude:           "-12.6646047",
			Longitude:          "-69.15873472",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "974404993",
			IsMedicalCenter:    true,
		},
		{
			Name:               "OTILIA",
			Latitude:           "-12.53001031",
			Longitude:          "-69.21164156",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "982305422",
			IsMedicalCenter:    true,
		},
		{
			Name:               "AA.HH. PUEBLO VIEJO",
			Latitude:           "-12.59603805",
			Longitude:          "-69.17360577",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "966744373",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SUDADERO",
			Latitude:           "-12.37926",
			Longitude:          "-69.14791667",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "974614552",
			IsMedicalCenter:    true,
		},
		{
			Name:               "EL TRIUNFO",
			Latitude:           "-12.58554618",
			Longitude:          "-69.16933813",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "950525252",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SALVACION",
			Latitude:           "-12.83561874",
			Longitude:          "-71.36059931",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "953899128",
			IsMedicalCenter:    true,
		},
		{
			Name:               "ALTO PUQUIRI",
			Latitude:           "-12.85249833",
			Longitude:          "-70.54464",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "976366281",
			IsMedicalCenter:    true,
		},
		{
			Name:               "HUEPETUHE",
			Latitude:           "-12.99798973",
			Longitude:          "-70.53422322",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "999167177",
			IsMedicalCenter:    true,
		},
		{
			Name:               "FLOR DE ACRE",
			Latitude:           "-11.33314327",
			Longitude:          "-69.61412571",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "927810939",
			IsMedicalCenter:    true,
		},
		{
			Name:               "LA NOVIA",
			Latitude:           "-11.8671856",
			Longitude:          "-69.13774377",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "953573385",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SONENE",
			Latitude:           "-12.5708045",
			Longitude:          "-68.70153945",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "993172485",
			IsMedicalCenter:    true,
		},
		{
			Name:               "CACHUELA",
			Latitude:           "-12.53727528",
			Longitude:          "-69.17009242",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "927400172",
			IsMedicalCenter:    true,
		},
		{
			Name:               "LAGO INAMBARILLO",
			Latitude:           "-12.7222947",
			Longitude:          "-69.80371331",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "963220235",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SANTA ROSA",
			Latitude:           "-12.925805",
			Longitude:          "-70.30156407",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "998234480",
			IsMedicalCenter:    true,
		},
		{
			Name:               "PRIMAVERA BAJA",
			Latitude:           "-12.90958165",
			Longitude:          "-70.11082914",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "930176472",
			IsMedicalCenter:    true,
		},
		{
			Name:               "LAS MERCEDES",
			Latitude:           "-12.70548316",
			Longitude:          "-69.44629448",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "997186597",
			IsMedicalCenter:    true,
		},
		{
			Name:               "VUELTA GRANDE",
			Latitude:           "-12.63523542",
			Longitude:          "-69.90288884",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "974592827",
			IsMedicalCenter:    true,
		},
		{
			Name:               "LABERINTO",
			Latitude:           "-12.7176711",
			Longitude:          "-69.58775788",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "966974503",
			IsMedicalCenter:    true,
		},
		{
			Name:               "VIRGENES DEL SOL",
			Latitude:           "-12.82373362",
			Longitude:          "-69.66358465",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "962373920",
			IsMedicalCenter:    true,
		},
		{
			Name:               "MANSILLA",
			Latitude:           "-12.74971657",
			Longitude:          "-71.3528717",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "996091384",
			IsMedicalCenter:    true,
		},
		{
			Name:               "PUERTO LUZ",
			Latitude:           "-12.74549",
			Longitude:          "-70.59614",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "966829821",
			IsMedicalCenter:    true,
		},
		{
			Name:               "PRIMAVERA",
			Latitude:           "-11.04225243",
			Longitude:          "-69.57182446",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "940895461",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SAN MARTIN DE PORRES",
			Latitude:           "-11.40308267",
			Longitude:          "-69.48814569",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "941002279",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SARAYACU",
			Latitude:           "-12.79668037",
			Longitude:          "-70.03727418",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "985030376",
			IsMedicalCenter:    true,
		},
		{
			Name:               "GAMITANA",
			Latitude:           "-12.88834646",
			Longitude:          "-71.34952908",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "947868531",
			IsMedicalCenter:    true,
		},
		{
			Name:               "YOMIBATO",
			Latitude:           "-11.80247584",
			Longitude:          "-71.90907731",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "990874501",
			IsMedicalCenter:    true,
		},
		{
			Name:               "BOCA COLORADO",
			Latitude:           "-12.61959738",
			Longitude:          "-70.39459923",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "952282793",
			IsMedicalCenter:    true,
		},
		{
			Name:               "PARIAMARCA",
			Latitude:           "-12.42651169",
			Longitude:          "-69.26805082",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "930317859",
			IsMedicalCenter:    true,
		},
		{
			Name:               "PUERTO PARDO",
			Latitude:           "-12.50394466",
			Longitude:          "-68.65997816",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "982701909",
			IsMedicalCenter:    true,
		},
		{
			Name:               "FITZCARRALD",
			Latitude:           "-12.66943939",
			Longitude:          "-69.34653208",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "982318555",
			IsMedicalCenter:    true,
		},
		{
			Name:               "PALMA REAL",
			Latitude:           "-12.51141281",
			Longitude:          "-68.7759142",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "900243780",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SAN BERNARDO",
			Latitude:           "-12.68726402",
			Longitude:          "-69.39943651",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "952482163",
			IsMedicalCenter:    true,
		},
		{
			Name:               "INFIERNO",
			Latitude:           "-12.72960516",
			Longitude:          "-69.22824067",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "919006401",
			IsMedicalCenter:    true,
		},
		{
			Name:               "EL PRADO",
			Latitude:           "-12.54284436",
			Longitude:          "-69.19419523",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "966401602",
			IsMedicalCenter:    true,
		},
		{
			Name:               "ALTO LIBERTAD",
			Latitude:           "-12.8985201",
			Longitude:          "-69.94556417",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "915946678",
			IsMedicalCenter:    true,
		},
		{
			Name:               "MAVILA",
			Latitude:           "-11.93553086",
			Longitude:          "-69.11884566",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "931870820",
			IsMedicalCenter:    true,
		},
		{
			Name:               "LUCERNA",
			Latitude:           "-12.09795",
			Longitude:          "-69.47066167",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "915242222",
			IsMedicalCenter:    true,
		},
		{
			Name:               "ITAHUANIA",
			Latitude:           "-12.63759667",
			Longitude:          "-71.22429833",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "983209134",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SHINTUYA",
			Latitude:           "-12.66917833",
			Longitude:          "-71.29465",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "952929786",
			IsMedicalCenter:    true,
		},
		{
			Name:               "PUNQUIRI CHICO",
			Latitude:           "-12.62196168",
			Longitude:          "-70.39786251",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "975708801",
			IsMedicalCenter:    true,
		},
		{
			Name:               "PUNQUIRI",
			Latitude:           "-13.06655506",
			Longitude:          "-70.39586883",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "915018100",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SHIRINGAYOC",
			Latitude:           "-11.90362087",
			Longitude:          "-69.08459686",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "989563252",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SAN LORENZO",
			Latitude:           "-11.45530876",
			Longitude:          "-69.32168963",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "944784992",
			IsMedicalCenter:    true,
		},
		{
			Name:               "ALERTA",
			Latitude:           "-11.65772654",
			Longitude:          "-69.23396244",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "927819179",
			IsMedicalCenter:    true,
		},
		{
			Name:               "JORGE CHAVEZ",
			Latitude:           "-12.59748174",
			Longitude:          "-69.19552847",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "943585583",
			IsMedicalCenter:    true,
		},
		{
			Name:               "SANTA RITA",
			Latitude:           "-12.91430556",
			Longitude:          "-70.19549145",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "980824662",
			IsMedicalCenter:    true,
		},
		{
			Name:               "BOCA UNION",
			Latitude:           "-12.70767693",
			Longitude:          "-69.67344199",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "959309254",
			IsMedicalCenter:    true,
		},
		{
			Name:               "BOCA MANU",
			Latitude:           "-12.26316667",
			Longitude:          "-70.90774167",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "951426544",
			IsMedicalCenter:    true,
		},
		{
			Name:               "CAYCHIHUE",
			Latitude:           "-13.03579429",
			Longitude:          "-70.42711403",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "965410434",
			IsMedicalCenter:    true,
		},
		{
			Name:               "NUEVO PACARAN",
			Latitude:           "-11.83918315",
			Longitude:          "-69.11702507",
			Description:        "Centro de salud",
			PhoneMedicalCenter: "938590100",
			IsMedicalCenter:    true,
		},
	}

	// Crear MedicalCenters con IDs generados
	for i := range medicalCenters {
		medicalCenters[i].ID = uuid.New()
		medicalCenters[i].CreatedAt = time.Now()
		medicalCenters[i].UpdatedAt = time.Now()
	}

	if err := tx.Create(&medicalCenters).Error; err != nil {
		return fmt.Errorf("error creando centros de salud: %w", err)
	}

	log.Printf("‚úÖ %d centros de salud creados", len(medicalCenters))
	return nil
}

func checkAndCreateMedicalCenter(db *gorm.DB) error {
	var medicalCenter int64
	if err := db.Model(&domain.Locality{}).Count(&medicalCenter).Error; err != nil {
		return err
	}

	if medicalCenter == 0 {
		log.Println("‚ùì No se encontraron centros medicos, creando preguntas frecuentes...")
		return seedFAQs(db)
	}

	log.Println("‚úÖ FAQs verificadas - OK")
	return nil
}
